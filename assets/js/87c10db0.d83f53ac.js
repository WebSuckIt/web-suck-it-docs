"use strict";(self.webpackChunkwebsuckit_docs=self.webpackChunkwebsuckit_docs||[]).push([[901],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>b});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),d=c(n),m=r,b=d["".concat(s,".").concat(m)]||d[m]||p[m]||o;return n?a.createElement(b,l(l({ref:t},u),{},{components:n})):a.createElement(b,l({ref:t},u))}));function b(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=m;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[d]="string"==typeof e?e:r,l[1]=i;for(var c=2;c<o;c++)l[c]=n[c];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},5162:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(7294),r=n(6010);const o={tabItem:"tabItem_Ymn6"};function l(e){let{children:t,hidden:n,className:l}=e;return a.createElement("div",{role:"tabpanel",className:(0,r.Z)(o.tabItem,l),hidden:n},t)}},4866:(e,t,n)=>{n.d(t,{Z:()=>w});var a=n(7462),r=n(7294),o=n(6010),l=n(2466),i=n(6550),s=n(1980),c=n(7392),u=n(12);function d(e){return function(e){return r.Children.map(e,(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:n,attributes:a,default:r}}=e;return{value:t,label:n,attributes:a,default:r}}))}function p(e){const{values:t,children:n}=e;return(0,r.useMemo)((()=>{const e=t??d(n);return function(e){const t=(0,c.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function m(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function b(e){let{queryString:t=!1,groupId:n}=e;const a=(0,i.k6)(),o=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,s._X)(o),(0,r.useCallback)((e=>{if(!o)return;const t=new URLSearchParams(a.location.search);t.set(o,e),a.replace({...a.location,search:t.toString()})}),[o,a])]}function h(e){const{defaultValue:t,queryString:n=!1,groupId:a}=e,o=p(e),[l,i]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!m({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const a=n.find((e=>e.default))??n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:o}))),[s,c]=b({queryString:n,groupId:a}),[d,h]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[a,o]=(0,u.Nk)(n);return[a,(0,r.useCallback)((e=>{n&&o.set(e)}),[n,o])]}({groupId:a}),f=(()=>{const e=s??d;return m({value:e,tabValues:o})?e:null})();(0,r.useLayoutEffect)((()=>{f&&i(f)}),[f]);return{selectedValue:l,selectValue:(0,r.useCallback)((e=>{if(!m({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);i(e),c(e),h(e)}),[c,h,o]),tabValues:o}}var f=n(2389);const y={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function v(e){let{className:t,block:n,selectedValue:i,selectValue:s,tabValues:c}=e;const u=[],{blockElementScrollPositionUntilNextRender:d}=(0,l.o5)(),p=e=>{const t=e.currentTarget,n=u.indexOf(t),a=c[n].value;a!==i&&(d(t),s(a))},m=e=>{let t=null;switch(e.key){case"Enter":p(e);break;case"ArrowRight":{const n=u.indexOf(e.currentTarget)+1;t=u[n]??u[0];break}case"ArrowLeft":{const n=u.indexOf(e.currentTarget)-1;t=u[n]??u[u.length-1];break}}t?.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":n},t)},c.map((e=>{let{value:t,label:n,attributes:l}=e;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:i===t?0:-1,"aria-selected":i===t,key:t,ref:e=>u.push(e),onKeyDown:m,onClick:p},l,{className:(0,o.Z)("tabs__item",y.tabItem,l?.className,{"tabs__item--active":i===t})}),n??t)})))}function k(e){let{lazy:t,children:n,selectedValue:a}=e;const o=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=o.find((e=>e.props.value===a));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},o.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==a}))))}function g(e){const t=h(e);return r.createElement("div",{className:(0,o.Z)("tabs-container",y.tabList)},r.createElement(v,(0,a.Z)({},e,t)),r.createElement(k,(0,a.Z)({},e,t)))}function w(e){const t=(0,f.Z)();return r.createElement(g,(0,a.Z)({key:String(t)},e))}},3702:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>s,default:()=>b,frontMatter:()=>i,metadata:()=>c,toc:()=>d});var a=n(7462),r=(n(7294),n(3905)),o=n(4866),l=n(5162);const i={sidebar_position:1},s="Collaborative Text editor in JS",c={unversionedId:"SDK example quick start/collaborative-text-editor-in-JS",id:"SDK example quick start/collaborative-text-editor-in-JS",title:"Collaborative Text editor in JS",description:"Collaborative Text editor with Websuckit demo gif",source:"@site/docs/SDK example quick start/collaborative-text-editor-in-JS.mdx",sourceDirName:"SDK example quick start",slug:"/SDK example quick start/collaborative-text-editor-in-JS",permalink:"/SDK example quick start/collaborative-text-editor-in-JS",draft:!1,editUrl:"https://github.com/WebSuckIt/web-suck-it-docs/edit/main/docs/SDK example quick start/collaborative-text-editor-in-JS.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"SDK example quick start",permalink:"/category/sdk-example-quick-start"},next:{title:"Minimal Shared Todo app in JS",permalink:"/SDK example quick start/shared-todo-app-in-JS"}},u={},d=[{value:"Get user keys",id:"get-user-keys",level:2},{value:"Get Channel keys",id:"get-channel-keys",level:2},{value:"Create webpage",id:"create-webpage",level:2}],p={toc:d},m="wrapper";function b(e){let{components:t,...n}=e;return(0,r.kt)(m,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"collaborative-text-editor-in-js"},"Collaborative Text editor in JS"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://res.cloudinary.com/silva/image/upload/v1701349240/collabortative-editor-with-websuckit.gif",alt:"Collaborative Text editor with Websuckit demo gif"})),(0,r.kt)("p",null,"By following this guide, you will acquire the knowledge to produce a simple text editor designed to allow collaborators to work on the same file in a webpage. Please feel free to ask any questions you may have along the way."),(0,r.kt)("h2",{id:"get-user-keys"},"Get user keys"),(0,r.kt)("p",null,"To access your User Keys i.e ",(0,r.kt)("inlineCode",{parentName:"p"},"PUBLIC_KEY"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"USER_ID")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"ACCESS_KEY"),", ",(0,r.kt)("a",{parentName:"p",href:"https://websuckit.com/signup"},(0,r.kt)("strong",{parentName:"a"},"create a free account"))," and navigate to your dashboard, hover over the ",(0,r.kt)("strong",{parentName:"p"},"Account")," button in the top right corner of the page, and then click on the ",(0,r.kt)("strong",{parentName:"p"},"User Keys")," button."),(0,r.kt)("h2",{id:"get-channel-keys"},"Get Channel keys"),(0,r.kt)("p",null,"In order to access your Channel Keys such as ",(0,r.kt)("inlineCode",{parentName:"p"},"CHANNEL_PASSKEY")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"CHANNEL_NAME"),", you will need to ",(0,r.kt)("a",{parentName:"p",href:"https://websuckit.com/signup"},(0,r.kt)("strong",{parentName:"a"},"create a free account")),' first. Once you have done that, navigate to your dashboard and click on the "Add Channel" button. After that, click on "Create" to add a new channel. Finally, click on the name of the channel you just created and then click on the "Channel Keys" tab. There, you will be able to access your Channel Keys.'),(0,r.kt)("h2",{id:"create-webpage"},"Create webpage"),(0,r.kt)("p",null,"We will be using ",(0,r.kt)("a",{parentName:"p",href:"https://ace.c9.io"},(0,r.kt)("strong",{parentName:"a"},"Ace"))," for the code editor, but feel free to use any library of your choice. Create ",(0,r.kt)("inlineCode",{parentName:"p"},"index.html"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"index.js")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"styles.css"),", then copy and paste the following code respectively."),(0,r.kt)(o.Z,{defaultValue:"html",values:[{label:"HTML",value:"html"},{label:"JavaScript",value:"javascript"},{label:"CSS",value:"css"}],mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"html",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html",metastring:'title="/src/index.html"',title:'"/src/index.html"'},'<!DOCTYPE html>\n<html>\n <head>\n  <title>Collaborative Text editor in JS</title>\n  <meta charset="UTF-8" />\n\n  <script\n   src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.01/ace.js"\n   type="text/javascript"\n   charset="utf-8"\n  ><\/script>\n </head>\n <body>\n  <div id="wrapper">\n   <div id="aceEditor" class="aceEditor"></div>\n  </div>\n\n  <script src="index.js"><\/script>\n </body>\n</html>\n'))),(0,r.kt)(l.Z,{value:"javascript",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="/src/script.js"',title:'"/src/script.js"'},'import Websuckit from "@websuckit/js";\nimport "./styles.css";\n\nconst userKeys = {\n publicKey: "PUBLIC_KEY", // Replace with \'PUBLIC_KEY\' from dashboard\n userId: "USER_ID" // Replace with \'USER_ID\' from dashboard\n};\n\nconst channelKeys = {\n channelName: "CHANNEL_NAME", // Replace with \'CHANNEL_NAME\' from dashboard\n channelPassKey: "CHANNEL_PASSKEY", // Replace with \'CHANNEL_PASSKEY\' from dashboard\n replaySelf: false // Send message to self\n};\n\n// Websuckit initialization\nconst websuckitInit = new Websuckit({ ...userKeys });\n\n// Get websocket connection url from Websuckit\nconst connectionUrl = websuckitInit.getConnectionUrl({ ...channelKeys }).value;\n\n// Connect to websocket Url https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API\nconst ws = new WebSocket(connectionUrl);\n\nws.addEventListener("close", (event) => {\n console.log("The connection has been closed successfully.");\n});\n\nws.addEventListener("open", (event) => {\n console.log("The connection has been opened successfully.");\n});\n\nws.addEventListener("message", (event) => {\n const delta = JSON.parse(event.data).data;\n last_applied_change = delta;\n aceEditor.getSession().getDocument().applyDeltas([delta]);\n});\n\nlet aceEditor = null;\nlet last_applied_change = null;\nlet just_cleared_buffer = null;\naceEditor = ace.edit("aceEditor");\naceEditor.getSession().setValue(\n `const websuckit = "Realtime interactive Js Code editor with Websuckit"\n  `\n);\naceEditor.setTheme("ace/theme/tomorrow");\naceEditor.getSession().setMode("ace/mode/javascript");\naceEditor.$blockScrolling = Infinity;\n\naceEditor.on(\n "change",\n function (e) {\n  if (!deepEqual(last_applied_change, e.data)) {\n   ws.send(JSON.stringify(e));\n   last_applied_change = e.data;\n  }\n  just_cleared_buffer = false;\n },\n false\n);\n\njust_cleared_buffer = true;\ndocument.getElementsByTagName("textarea")[0].focus();\njust_cleared_buffer = false;\nlast_applied_change = null;\n\n// Utils to compare object\nfunction deepEqual(x, y) {\n return x && y && typeof x === "object" && typeof y === "object"\n  ? Object.keys(x).length === Object.keys(y).length &&\n     Object.keys(x).reduce(function (isEqual, key) {\n      return isEqual && deepEqual(x[key], y[key]);\n     }, true)\n  : x === y;\n}\n'))),(0,r.kt)(l.Z,{value:"css",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-css",metastring:'title="./styles.css"',title:'"./styles.css"'},"#aceEditor {\n width: 100%;\n height: 100vh;\n top: 0;\n bottom: 0;\n left: 0;\n right: 0;\n display: block;\n}\n\ndiv.aceEditor {\n width: 100%;\n height: 100%;\n}\n")))))}b.isMDXComponent=!0}}]);